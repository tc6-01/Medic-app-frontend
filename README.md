## Before design

- 不要动这种翔山代码（能不动就不动）
- 前端设计尽量保持不变，在现有基础上进行扩展。
- 千万不要觉得自己可以改过来，有那时间不如再重新写一个

## TODO
- 优化前端加载性能，优化文件结构，重点保留有效文件，避免频繁加载
- 进行完整测试流程，检查相关bug！
- 进行整体功能完善，小细节（前端部分内容进行调整，相关功能进行关联），添加部分按钮功能
    - 病历到期进行删除，病历预览次数到达之后进行删除 
    - 打开之后就算一次预览，避免多次访问
    - 查看病历共享详情页（具体共享策略：过期时间，共享发起人，共享者，预览次数）

    - 被共享者可以进行二次共享，以及病历删除（删除当前共享记录）
    - 共享者可以删除病历（当前共享记录）

### 测试流程
- 管理员
    - 登录
    - 上传文件
    - 查看文件是否共享成功

- 普通用户
    - 注册
    - 登录
    - 查看病历（可以进行预览）
        - 查看当前可以看到的所有病历（包括自己拥有的，别人共享给自己的）
        - 查看自己共享出去的病历
        - 查看别人共享给自己的病历
        > BUG
          如果获取到病历数量为空，直接点击页面报错
        > **TODO**
        查看病历进行预览次数更新，添加过期时间限制，进行及时删除
        - 需要进行预览次数更新的情况有两种
            - 共享目标为当前用户
            - 该用户为共享发起者，且当前用户并不是该病历拥有者

        - 可访问次数更新
            - 进行文件共享时，需要考虑原有文件访问次数（在原有访问次数的基础上进行更新）
            - 文件预览时需要进行可访问次数更新（更新目标用户的共享记录，除了当前用户为病历所有者，不需要进行更新）
    - 病历共享
        - 病历进行共享
            - 选择共享对象
            - 选择共享结束时间
            - 选择使用次数
        