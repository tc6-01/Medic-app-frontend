{"version":3,"file":"static/js/399.201832d7.chunk.js","mappings":"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","sources":["components/common/OperationItem/index.tsx","components/common/Section/index.tsx","components/common/VerticalList/index.tsx","service/policyApi.ts","components/common/PolicyItem/index.tsx","components/common/PopMenu/index.tsx","components/policy-manage/PolicyOperationMenu/index.tsx","components/policy-manage/index.tsx","pages/policy-manage/index.tsx","states/page/policy-manage/index.ts","styles/NoUserSelect.ts"],"sourcesContent":["import { FileItemProps, GroupItemProps, OperationItemProps } from \"src/types/ComponentProps\"\r\nimport { MoreVert } from \"@material-ui/icons\";\r\nimport { FolderOpen } from '@mui/icons-material';\r\nimport { Avatar, Box, Button, Grid, Stack, Theme, Typography } from '@mui/material';\r\nimport { createStyles, makeStyles } from '@material-ui/core';\r\nimport IconButton from '@mui/material/IconButton';\r\n\r\n\r\nconst centerStyle = makeStyles({\r\n    root: {\r\n        '& .MuiGrid-root': {\r\n            display: 'flex',\r\n            justifyContent: 'flex-start',\r\n            alignItems: 'center',\r\n        },\r\n        '& .MuiTypography-root': {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n        }\r\n    }\r\n})\r\nconst OperationItem = ({ icon, name, onclick }: OperationItemProps) => {\r\n    const center = centerStyle();\r\n    return (\r\n        <IconButton onClick={() => onclick?.call(onclick)} className={center.root} sx={{ width: '100%' }}>\r\n            <Grid container>\r\n                <Grid item xs={3}>\r\n                    {icon}\r\n                </Grid>\r\n                <Grid item >\r\n                    <Typography fontWeight={'bold'} fontSize={17} noWrap>{name}</Typography>\r\n                </Grid>\r\n            </Grid>\r\n        </IconButton >\r\n    )\r\n}\r\n\r\n\r\nexport default OperationItem\r\n","import { Stack, Typography } from '@mui/material';\r\nimport { SectionProps } from \"src/types/ComponentProps\";\r\n\r\n\r\nconst Section = ({ title, children }: SectionProps) => {\r\n    return (\r\n        <Stack mt={1}>\r\n            {/* <Divider sx={{ mb: 1 }} /> */}\r\n            <Typography variant=\"h4\" color=\"textPrimary\" justifyContent={'left'}>{title}</Typography>\r\n            {children}\r\n        </Stack>\r\n    )\r\n}\r\n\r\n\r\nexport default Section\r\n","import { createStyles, makeStyles } from '@material-ui/core';\r\nimport { List, ListItem, Theme } from '@mui/material';\r\nimport { VerticalListProps } from \"src/types/ComponentProps\";\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            width: '100%',\r\n            justifyContent: 'start',\r\n            userSelect: 'none',\r\n        },\r\n    }),\r\n);\r\n\r\n\r\n\r\nconst VerticalList = ({ items, onItemClicked }: VerticalListProps) => {\r\n    const classes = useStyles();\r\n    return (\r\n        <List component=\"nav\" className={classes.root} aria-label=\"contacts\" >\r\n            {items?.map((item, index) =>\r\n                <ListItem alignItems=\"center\" key={index} onClick={() => onItemClicked ? onItemClicked(index) : null}>\r\n                    {item}\r\n                </ListItem>\r\n            )}\r\n        </List>\r\n    )\r\n}\r\n\r\n\r\nexport default VerticalList\r\n","import axios, { AxiosRequestConfig } from 'axios'\r\nimport { Rule } from 'src/types/models/DataModels'\r\nimport { Policy, PolicyDataResponse, PolicyIEnumerableDataResponse } from './models'\r\n\r\nconst getPolicies = async (): Promise<PolicyDataResponse | PolicyIEnumerableDataResponse> => {\r\n  const res = await axios.get('/api/policy', { headers: { Authorization: 'Bearer ' + localStorage.getItem('token') } })\r\n  return res.data\r\n}\r\n\r\nconst getPolicyById = async (id: string): Promise<PolicyDataResponse> => {\r\n  const res = await axios.get(`/api/policy?objectId=${id}`, {\r\n    headers: { Authorization: 'Bearer ' + localStorage.getItem('token') }\r\n  })\r\n  return res.data\r\n}\r\n\r\nconst addPolicy = async (policy: Policy): Promise<Response> => {\r\n  const res = await axios.post('/api/policy', policy, {\r\n    headers: { Authorization: 'Bearer ' + localStorage.getItem('token') }\r\n  })\r\n  return res.data\r\n}\r\n\r\nconst updatePolicyRules = async (id: string, Rules: Rule[]): Promise<Response> => {\r\n  const res = await axios.put(`/api/policy?objectId=${id}`, Rules, {\r\n    headers: { Authorization: 'Bearer ' + localStorage.getItem('token') }\r\n  })\r\n  return res.data\r\n}\r\n\r\nconst deletePolicy = async (id: string): Promise<Response> => {\r\n  const res = await axios.delete(`/api/policy?objectId=${id}`, {\r\n    headers: { Authorization: 'Bearer ' + localStorage.getItem('token') }\r\n  })\r\n  return res.data\r\n}\r\n\r\nexport { getPolicies, getPolicyById, addPolicy, updatePolicyRules, deletePolicy }\r\n","import { FileItemProps, PolicyItemProps } from \"src/types/ComponentProps\";\r\nimport { MoreVert } from \"@material-ui/icons\";\r\nimport { Book, FileOpen } from '@mui/icons-material';\r\nimport { Avatar, Box, ListItemAvatar, ListItemText, Stack, Typography, useTheme } from '@mui/material';\r\nimport IconButton from '@mui/material/IconButton';\r\n\r\n\r\n\r\nconst PolicyItem = ({ name, createdTime, description, onDetailClick }: PolicyItemProps) => {\r\n    const theme = useTheme();\r\n    return (\r\n        <>\r\n            <ListItemAvatar>\r\n                <Avatar sx={{ backgroundColor: theme.colors.primary.light }}>\r\n                    <Book fontSize='large' />\r\n                </Avatar>\r\n            </ListItemAvatar>\r\n            <ListItemText\r\n                onClick={onDetailClick}\r\n                primary={name}\r\n                secondary={\r\n                    <Stack>\r\n                        <Typography noWrap>\r\n                            {description}\r\n                        </Typography>\r\n                        <Typography noWrap>\r\n                            {createdTime}\r\n                        </Typography>\r\n                    </Stack>\r\n                } />\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default PolicyItem\r\n","import React from 'react';\r\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport SpeedDial, { SpeedDialProps } from '@material-ui/lab/SpeedDial';\r\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\r\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopyOutlined';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport PrintIcon from '@material-ui/icons/Print';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport { SpeedDialMenuProps } from 'src/types/ComponentProps';\r\nimport { SpeedDialMenuOptionProps } from '../../../types/ComponentProps';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            transform: 'translateZ(0px)',\r\n            flexGrow: 1,\r\n        },\r\n        exampleWrapper: {\r\n            position: 'absolute',\r\n            left: '97vw',\r\n            bottom: '10vh',\r\n            marginTop: theme.spacing(3),\r\n            height: 380,\r\n        },\r\n        radioGroup: {\r\n            margin: theme.spacing(1, 0),\r\n        },\r\n        toolTip: {\r\n            width: 100,\r\n            height: 100,\r\n            color: 'black',\r\n        },\r\n        speedDial: {\r\n            position: 'absolute',\r\n            '&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft': {\r\n                bottom: theme.spacing(2),\r\n                right: theme.spacing(2),\r\n            },\r\n            '&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight': {\r\n                top: theme.spacing(2),\r\n                left: theme.spacing(2),\r\n            },\r\n        },\r\n    }),\r\n);\r\n\r\n\r\n\r\nexport default function SpeedDialMenu({ options }: SpeedDialMenuProps) {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = React.useState(false);\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.exampleWrapper}>\r\n            <SpeedDial\r\n                ariaLabel=\"SpeedDial example\"\r\n                className={classes.speedDial}\r\n                icon={<SpeedDialIcon />}\r\n                onClose={handleClose}\r\n                onOpen={handleOpen}\r\n                open={open}\r\n                direction={'up'}\r\n            >\r\n                {options.map((option) => (\r\n                    <SpeedDialAction\r\n                        key={option.name}\r\n                        icon={option.icon}\r\n                        tooltipTitle={option.name}\r\n                        onClick={option.onClick}\r\n                        tooltipOpen={true}\r\n                        TooltipClasses={{ tooltip: classes.toolTip }}\r\n                    />\r\n                ))}\r\n            </SpeedDial>\r\n        </div>\r\n    );\r\n}\r\n","import { Delete, ErrorOutline } from '@material-ui/icons';\r\nimport { Box, Stack } from '@mui/material';\r\nimport { FolderArrowUp } from 'mdi-material-ui';\r\nimport OperationItem from 'src/components/common/OperationItem';\r\nimport Section from 'src/components/common/Section';\r\nimport VerticalList from 'src/components/common/VerticalList';\r\nimport { PolicyOperationMenuProps } from '../../../types/ComponentProps';\r\nimport PolicyItem from '../../common/PolicyItem/index';\r\n\r\n\r\n\r\nconst PolicyOperationMenu = ({ policyName, onOperationClicked }: PolicyOperationMenuProps) => {\r\n    return (\r\n        <Stack m={1}>\r\n            <Box borderRadius={3}>\r\n                <Box mt={2} mb={2} width={'100%'} display='flex' justifyContent={'center'}>\r\n                    <PolicyItem name={policyName} createdTime={null} description={null} />\r\n                </Box>\r\n                <Section title='策略操作'>\r\n                    <VerticalList items={[\r\n                        <OperationItem icon={<FolderArrowUp fontSize='large' />} name={'编辑'} onclick={() => onOperationClicked('edit')} />,\r\n                        <OperationItem icon={<Delete fontSize='large' />} name={'删除'} onclick={() => onOperationClicked('delete')} />\r\n                    ]} />\r\n                </Section>\r\n                <Section title='更多操作'>\r\n                    <VerticalList items={[\r\n                        <OperationItem icon={<ErrorOutline fontSize='large' />} name={'详细信息'} onclick={() => onOperationClicked('detail')} />\r\n                    ]} />\r\n                </Section>\r\n            </Box>\r\n\r\n        </Stack>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default PolicyOperationMenu\r\n","// ** MUI Imports\r\n\r\n// ** Demo Components Imports\r\nimport { Fade, Grid, Stack, Typography } from '@mui/material';\r\nimport { BookOutline } from 'mdi-material-ui';\r\nimport { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router';\r\nimport { useStore } from 'reto';\r\nimport { deletePolicy, getPolicies } from 'src/service/policyApi';\r\nimport { SnackBarStore } from 'src/states/global/TopSnackBarStore';\r\nimport { PolicyManagePageStore } from 'src/states/page/policy-manage';\r\nimport { noUserSelect } from 'src/styles/NoUserSelect';\r\nimport { PolicyOperationType } from 'src/types/ComponentProps';\r\nimport { CreatePolicyPageStore } from '../../states/page/policy-manage/CreatePolicyPageStore';\r\nimport PolicyItem from '../common/PolicyItem';\r\nimport PopMenu from '../common/PopMenu';\r\nimport VerticalList from '../common/VerticalList';\r\nimport PolicyOperationMenu from './PolicyOperationMenu';\r\n\r\nconst PolicyManageWrapper = () => {\r\n  const navi = useNavigate()\r\n  const states = useStore(PolicyManagePageStore)\r\n  const topSnackBarStates = useStore(SnackBarStore)\r\n  const editPolicyStore = useStore(CreatePolicyPageStore)\r\n  useEffect(() => {\r\n    getPolicies().then(res => {\r\n      if (res && res.status === 0) {\r\n        if (Array.isArray(res.data)) {\r\n          console.log(res.data)\r\n          states.setRows(res.data)\r\n          states.setLoading(false)\r\n        } else {\r\n          states.setRows([res.data])\r\n        }\r\n      }\r\n    })\r\n  }, [])\r\n  const handlePolicyOperation = (ty: PolicyOperationType, index: number) => {\r\n    switch (ty) {\r\n      case 'delete':\r\n        deletePolicy(states.rows[index].id).then(res => {\r\n          states.setBottomDrawerOpen(false)\r\n          if (res && res.status === 0) {\r\n            states.setRows(states.rows.filter((_, i) => i !== index))\r\n            topSnackBarStates.setSnackBarOpen(true)\r\n            topSnackBarStates.setSnackBarMessage('删除成功')\r\n          } else {\r\n            topSnackBarStates.setSnackBarOpen(true)\r\n            topSnackBarStates.setSnackBarType('error')\r\n            topSnackBarStates.setSnackBarMessage('删除失败')\r\n          }\r\n        })\r\n        break;\r\n      case 'detail':\r\n        console.log('detail files at index', index);\r\n        break;\r\n      // case 'edit':\r\n      //   editPolicyStore.\r\n      //     states.rows[index]\r\n      //   break;\r\n    }\r\n  }\r\n\r\n  const onOperationClickHandler = (index: number) => {\r\n    states.setBottomDrawerOpen(true)\r\n    states.setBottomDrawerContent(\r\n      <PolicyOperationMenu policyName={states.rows[index].name} onOperationClicked={(ty) => handlePolicyOperation(ty, index)} />\r\n    )\r\n  }\r\n  return (\r\n    <Fade in={true}>\r\n      <Stack alignContent='space-around' className={noUserSelect().root}>\r\n        {\r\n          states.rows ? <VerticalList items={states.rows.map((item, index) => {\r\n            return <PolicyItem name={item.name} createdTime={null} description={item.description} onDetailClick={() => onOperationClickHandler(index)} />\r\n          })} /> : <Grid><Typography>空</Typography></Grid>\r\n        }\r\n        <PopMenu options={[\r\n          { name: '新建共享', icon: <BookOutline />, onClick: () => navi('/policymanage/create') },\r\n        ]} />\r\n      </Stack>\r\n    </Fade>\r\n  )\r\n}\r\n\r\nexport default PolicyManageWrapper\r\n","// ** MUI Imports\r\n\r\n// ** Demo Components Imports\r\nimport { makeStyles } from '@material-ui/core'\r\nimport { Add } from '@material-ui/icons'\r\nimport { Fab } from '@mui/material'\r\nimport { Provider } from 'reto'\r\nimport { ConfirmDeleteDialogStore } from 'src/states/common/ConfirmDeleteDialogStore'\r\nimport { LoadingStore } from 'src/states/common/LoadingStore'\r\nimport { PolicyManagePageStore } from 'src/states/page/policy-manage'\r\nimport PolicyManageWrapper from '../../components/policy-manage/index'\r\n\r\nconst PolicyManagePage = () => {\r\n  return (\r\n    <Provider of={LoadingStore} memo>\r\n      <Provider of={ConfirmDeleteDialogStore} memo>\r\n        <Provider of={PolicyManagePageStore} memo>\r\n          <PolicyManageWrapper />\r\n        </Provider>\r\n      </Provider>\r\n    </Provider>\r\n  )\r\n}\r\n\r\nexport default PolicyManagePage\r\n","import { BottomDrawerStates } from '../../global/BottomDrawerStore';\r\nimport { Dispatch, SetStateAction, useState } from 'react'\r\nimport { useStore } from 'reto'\r\nimport { Policy } from 'src/service/models'\r\nimport { ConfirmDeleteDialogStore } from '../../common/ConfirmDeleteDialogStore'\r\nimport { LoadingStore } from 'src/states/common/LoadingStore'\r\nimport { BottomDrawerStore } from '../../global/BottomDrawerStore';\r\n\r\nexport interface PolicyManagePageStates {\r\n  rows: Policy[]\r\n}\r\n\r\nexport interface PolicyManagePageStore\r\n  extends PolicyManagePageStates,\r\n  LoadingStore,\r\n  BottomDrawerStore {\r\n  setRows: Dispatch<SetStateAction<Policy[]>>\r\n}\r\n\r\nexport function PolicyManagePageStore(): PolicyManagePageStore {\r\n  const loadingStore = useStore(LoadingStore)\r\n  const drawerStore = useStore(BottomDrawerStore)\r\n  const [rows, setRows] = useState<Policy[]>([])\r\n  return {\r\n    ...loadingStore,\r\n    ...drawerStore,\r\n    rows,\r\n    setRows,\r\n  }\r\n}\r\n","import { makeStyles } from \"@material-ui/core\";\r\n\r\nexport const noUserSelect = makeStyles({\r\n    root: {\r\n        '& > *': { userSelect: 'none' }\r\n    }\r\n})\r\n"],"names":["centerStyle","makeStyles","root","display","justifyContent","alignItems","icon","name","onclick","center","onClick","call","className","sx","width","container","item","xs","fontWeight","fontSize","noWrap","title","children","mt","variant","color","useStyles","theme","createStyles","userSelect","items","onItemClicked","classes","component","map","index","getPolicies","axios","headers","Authorization","localStorage","getItem","res","data","deletePolicy","id","createdTime","description","onDetailClick","useTheme","ListItemAvatar","Avatar","backgroundColor","colors","primary","light","Book","ListItemText","secondary","Stack","Typography","transform","flexGrow","exampleWrapper","position","left","bottom","marginTop","spacing","height","radioGroup","margin","toolTip","speedDial","right","top","SpeedDialMenu","options","React","open","setOpen","SpeedDial","ariaLabel","SpeedDialIcon","onClose","onOpen","direction","option","SpeedDialAction","tooltipTitle","tooltipOpen","TooltipClasses","tooltip","policyName","onOperationClicked","m","Box","borderRadius","mb","Section","VerticalList","OperationItem","FolderArrowUp","Delete","ErrorOutline","navi","useNavigate","states","useStore","PolicyManagePageStore","topSnackBarStates","SnackBarStore","CreatePolicyPageStore","useEffect","then","status","Array","isArray","console","log","setRows","setLoading","onOperationClickHandler","setBottomDrawerOpen","setBottomDrawerContent","rows","ty","filter","_","i","setSnackBarOpen","setSnackBarMessage","setSnackBarType","handlePolicyOperation","Fade","in","alignContent","noUserSelect","Grid","BookOutline","of","LoadingStore","memo","ConfirmDeleteDialogStore","loadingStore","drawerStore","BottomDrawerStore","useState"],"sourceRoot":""}