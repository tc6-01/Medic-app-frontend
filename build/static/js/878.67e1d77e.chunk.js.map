{"version":3,"file":"static/js/878.67e1d77e.chunk.js","mappings":"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","sources":["states/page/file-share/sharedbyme/index.ts","components/file-share/shared-by-me/ShredByMeFileOperationMenu/index.tsx","components/file-share/shared-by-me/SharedByMe.tsx","pages/file-share/SharedByMe.tsx"],"sourcesContent":["import { ConfirmDeleteDialogStore } from 'src/states/common/ConfirmDeleteDialogStore'\r\nimport { LoadingStore } from 'src/states/common/LoadingStore'\r\nimport { Dispatch, SetStateAction, useState } from 'react'\r\nimport { useStore } from 'reto'\r\nimport { PolicySelectData } from 'src/types/models/DataModels'\r\nimport { Tunnel } from 'src/service/models'\r\nimport { SharedFile } from 'src/service/medic'\r\n\r\ntype SnackBarType = 'success' | 'error' | 'warning' | 'info'\r\n\r\n// 新建数据通道\r\nexport interface SharedByMeStates {\r\n  files: SharedFile[]\r\n}\r\n\r\nexport interface SharedByMeStore\r\n  extends SharedByMeStates,\r\n  LoadingStore {\r\n  setFiles: Dispatch<SetStateAction<any[]>>\r\n}\r\n\r\nexport function SharedByMeStore(): SharedByMeStore {\r\n  const loadingStore = useStore(LoadingStore)\r\n  const confirmDeleteDialogStore = useStore(ConfirmDeleteDialogStore)\r\n  const [files, setFiles] = useState<any[]>([])\r\n  return {\r\n    ...loadingStore,\r\n    ...confirmDeleteDialogStore,\r\n    files,\r\n    setFiles\r\n  }\r\n}\r\n","import Section from 'src/components/common/Section';\r\nimport SimpleFileItem from 'src/components/common/SimpleFileItem';\r\nimport VerticalList from 'src/components/common/VerticalList';\r\nimport { Box, Stack } from '@mui/material';\r\nimport { FileListProps, FileOperationMenuProps } from '../../../../types/ComponentProps';\r\nimport OperationItem from 'src/components/common/OperationItem';\r\nimport { FolderArrowUp } from 'mdi-material-ui';\r\nimport { Delete, ErrorOutline, Share } from '@material-ui/icons';\r\n\r\n\r\n\r\nconst ShredByMeFileOperationMenu = ({ fileName, onOperationClicked }: FileOperationMenuProps) => {\r\n    return (\r\n        <Stack m={1}>\r\n            <Box borderRadius={3}>\r\n                <SimpleFileItem fileName={fileName} />\r\n                <Section title='文件操作'>\r\n                    <VerticalList items={[\r\n                        <OperationItem icon={<FolderArrowUp fontSize='large' />} name={'打开'} onclick={() => onOperationClicked('open')} />,\r\n                        // <OperationItem icon={<Share fontSize='large' />} name={'共享'} onclick={() => onOperationClicked('share')} />,\r\n                        <OperationItem icon={<Delete fontSize='large' />} name={'删除'} onclick={() => onOperationClicked('delete')} />\r\n                    ]} />\r\n                </Section>\r\n                <Section title='更多操作'>\r\n                    <VerticalList items={[\r\n                        <OperationItem icon={<ErrorOutline fontSize='large' />} name={'详细信息'} onclick={() => onOperationClicked('detail')} />\r\n                    ]} />\r\n                </Section>\r\n            </Box>\r\n\r\n        </Stack>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default ShredByMeFileOperationMenu\r\n","import { useEffect } from \"react\"\r\nimport { useNavigate } from \"react-router\"\r\nimport { getPolicies } from \"src/service/policyApi\"\r\nimport FileItem from \"../../common/FileItem\"\r\nimport VerticalList from \"../../common/VerticalList\"\r\nimport { useStore } from 'reto';\r\nimport { SharedByMeStore } from \"src/states/page/file-share/sharedbyme\"\r\nimport FileState from \"src/components/common/FileState\"\r\nimport { BottomDrawerStore } from '../../../states/global/BottomDrawerStore';\r\nimport FileOperationMenu from \"./ShredByMeFileOperationMenu\"\r\nimport ShredByMeFileOperationMenu from \"./ShredByMeFileOperationMenu\"\r\nimport { Box, Fade } from \"@mui/material\"\r\nimport { FileToFileItemData, SharedFileToFileItemData, getFileList, myShareFile } from \"src/service/medic\"\r\nimport { toLocalTimeString } from \"src/utils/time\"\r\nimport { sizeToString } from \"src/utils/sizeToString\"\r\nimport { shareFile } from '../../../service/medic';\r\n\r\nconst SharedByMeWrapper = () => {\r\n  const navi = useNavigate()\r\n  const states = useStore(SharedByMeStore)\r\n  const bottomeDrawerStates = useStore(BottomDrawerStore)\r\n  useEffect(() => {\r\n    myShareFile().then(res => {\r\n      if (res && res.code === 0) {\r\n        if (Array.isArray(res.data)) {\r\n          states.setFiles(res.data)\r\n          states.setLoading(false)\r\n        } else {\r\n          states.setFiles([res.data])\r\n        }\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  const handleFileOperation = (ty: any, index: number) => {\r\n    switch (ty) {\r\n      case 'delete':\r\n        console.log('delete files at index', index);\r\n        break;\r\n      case 'open':\r\n        bottomeDrawerStates.setBottomDrawerOpen(false)\r\n        console.log(states.files)\r\n        navi('/pdfpreview', { state: SharedFileToFileItemData(index, states.files[index]) })//传入Id值\r\n        break;\r\n      case 'share':\r\n        console.log('share files at index', index);\r\n        break;\r\n      case 'detail':\r\n        console.log('detail files at index', index);\r\n        break;\r\n    }\r\n  }\r\n  const onOperationClicked = (index: number) => {\r\n    bottomeDrawerStates.setBottomDrawerOpen(true)\r\n    bottomeDrawerStates.setBottomDrawerContent(\r\n      <ShredByMeFileOperationMenu fileName={states.files[index].fileName} onOperationClicked={(ty) => handleFileOperation(ty, index)} />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Fade in={true}>\r\n      <Box>\r\n        <VerticalList items={states.files?.map((SharedItems, index) => {\r\n          return <FileItem\r\n            key={index}\r\n            fileName={SharedItems.fileName}\r\n            fileTime={toLocalTimeString(SharedItems.expire)}\r\n            fileSize={sizeToString(SharedItems.fileSize)}\r\n            remainUse={SharedItems.useLimit - SharedItems.use}\r\n            sharedContent={<FileState state={'shared'} />}\r\n            onOperationClicked={() => onOperationClicked(index)} />\r\n        })} onItemClicked={onOperationClicked} />\r\n      </Box>\r\n    </Fade>\r\n  )\r\n}\r\nexport default SharedByMeWrapper\r\n","import SharedByMeWrapper from '../../components/file-share/shared-by-me/SharedByMe';\r\nimport { Provider } from 'reto';\r\nimport { SharedByMeStore } from 'src/states/page/file-share/sharedbyme';\r\nconst SharedByMePage = () => {\r\n    return (\r\n        <Provider of={SharedByMeStore}>\r\n            <SharedByMeWrapper />\r\n        </Provider>\r\n    )\r\n}\r\n\r\nexport default SharedByMePage\r\n"],"names":["SharedByMeStore","loadingStore","useStore","LoadingStore","confirmDeleteDialogStore","ConfirmDeleteDialogStore","useState","files","setFiles","fileName","onOperationClicked","Stack","m","Box","borderRadius","SimpleFileItem","Section","title","VerticalList","items","OperationItem","icon","FolderArrowUp","fontSize","name","onclick","Delete","ErrorOutline","navi","useNavigate","states","bottomeDrawerStates","BottomDrawerStore","useEffect","myShareFile","then","res","code","Array","isArray","data","setLoading","index","setBottomDrawerOpen","setBottomDrawerContent","ty","console","log","state","SharedFileToFileItemData","handleFileOperation","Fade","in","map","SharedItems","FileItem","fileTime","toLocalTimeString","expire","fileSize","sizeToString","remainUse","useLimit","use","sharedContent","FileState","onItemClicked","of","SharedByMe"],"sourceRoot":""}