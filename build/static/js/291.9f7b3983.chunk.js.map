{"version":3,"file":"static/js/291.9f7b3983.chunk.js","mappings":"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","sources":["components/common/InputControls/index.tsx","components/common/Toast/ToastItem.tsx","components/common/Toast/index.tsx","components/common/ItemSwitch/ItemSwitch.tsx","components/file-share/PolicyEditor.tsx","components/policy-manage/Edit/index.tsx","pages/policy-manage/create.tsx","service/medic.ts"],"sourcesContent":["import { DateTimePicker } from '@mui/lab'\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  FormControlLabel,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  styled,\r\n  Switch,\r\n  TextField,\r\n  Typography\r\n} from '@mui/material'\r\nimport { useState } from 'react'\r\nimport {\r\n  DateInputProps,\r\n  DateRangeInputProps,\r\n  SelectInputProps,\r\n  SwitchInputProps,\r\n  TextInputProps\r\n} from 'src/types/ComponentProps'\r\nimport SearchTextField from './SearchTextField'\r\nimport Checkbox from '@mui/material/Checkbox';\r\nconst TextInput = ({ id, name, defaultValue, placeHolder, onChange }: TextInputProps) => {\r\n  return (\r\n    <TextField\r\n      id={id}\r\n      fullWidth\r\n      label={name}\r\n      placeholder={placeHolder}\r\n      defaultValue={defaultValue}\r\n      onChange={onChange}\r\n    />\r\n  )\r\n}\r\n\r\nconst SelectInput = ({ id, name, options, defaultValue, placeHolder, onChange }: SelectInputProps) => {\r\n  return (\r\n    <FormControl fullWidth>\r\n      <InputLabel id='form-layouts-separator-select-label'>{name}</InputLabel>\r\n      <Select\r\n        id={id}\r\n        label={name}\r\n        defaultValue={defaultValue}\r\n        placeholder={placeHolder}\r\n        labelId='form-layouts-separator-select-label'\r\n        onChange={onChange}\r\n      >\r\n        {options.map((option, index) => {\r\n          return (\r\n            <MenuItem value={option.id} key={index}>\r\n              {option.name}\r\n            </MenuItem>\r\n          )\r\n        })}\r\n      </Select>\r\n    </FormControl>\r\n  )\r\n}\r\n\r\nconst Android12Switch = styled(Switch)(({ theme }) => ({\r\n  padding: 8,\r\n  '& .MuiSwitch-track': {\r\n    borderRadius: 22 / 2,\r\n    '&:before, &:after': {\r\n      content: '\"\"',\r\n      position: 'absolute',\r\n      top: '50%',\r\n      transform: 'translateY(-50%)',\r\n      width: 16,\r\n      height: 16\r\n    },\r\n    '&:before': {\r\n      backgroundImage: `url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" width=\"16\" viewBox=\"0 0 24 24\"><path fill=\"${encodeURIComponent(\r\n        theme.palette.getContrastText(theme.palette.primary.main)\r\n      )}\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"/></svg>')`,\r\n      left: 12\r\n    },\r\n    '&:after': {\r\n      backgroundImage: `url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" width=\"16\" viewBox=\"0 0 24 24\"><path fill=\"${encodeURIComponent(\r\n        theme.palette.getContrastText(theme.palette.primary.main)\r\n      )}\" d=\"M19,13H5V11H19V13Z\" /></svg>')`,\r\n      right: 12\r\n    }\r\n  },\r\n  '& .MuiSwitch-thumb': {\r\n    boxShadow: 'none',\r\n    width: 16,\r\n    height: 16,\r\n    margin: 2\r\n  }\r\n}))\r\n\r\nconst SwitchInput = ({ id, name, onChange, checked }: SwitchInputProps) => {\r\n  return (\r\n    <FormControlLabel\r\n      id={id}\r\n      control={<Checkbox defaultChecked />}\r\n      label={name}\r\n      labelPlacement='start'\r\n      checked={checked}\r\n      onChange={onChange}\r\n    />\r\n  )\r\n}\r\n\r\nconst DateInput = ({ defaultValue, onChange, title }: DateInputProps) => {\r\n  return (\r\n    <Box>\r\n      <DateTimePicker\r\n        label={title}\r\n        value={defaultValue}\r\n        onChange={(e, v) => onChange && onChange(e, v)}\r\n        renderInput={params => <TextField fullWidth {...params} />}\r\n      />\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst DateRangeInput = ({ defaultValue, onFromChange, onToChange, fromTitle, toTitle }: DateRangeInputProps) => {\r\n  const [from, setFrom] = useState(defaultValue ? defaultValue[0] : undefined)\r\n  const [to, setTo] = useState(defaultValue ? defaultValue[0] : undefined)\r\n  return (\r\n    <Box display='flex' justifyContent='stretch' alignContent={'center'}>\r\n      <DateTimePicker\r\n        label={fromTitle}\r\n        value={from}\r\n        onChange={(e, v) => {\r\n          setFrom(e)\r\n          onFromChange && onFromChange(e, v)\r\n        }}\r\n        renderInput={params => <TextField fullWidth {...params} />}\r\n      />\r\n      <Typography\r\n        minWidth={50}\r\n        display={'flex'}\r\n        justifyContent='center'\r\n        alignItems='center'\r\n        variant='h6'\r\n        ml={10}\r\n        mr={10}\r\n      >\r\n        至\r\n      </Typography>\r\n      <DateTimePicker\r\n        label={toTitle}\r\n        value={to}\r\n        onChange={(e, v) => {\r\n          setTo(e)\r\n          onToChange && onToChange(e, v)\r\n        }}\r\n        renderInput={params => <TextField fullWidth {...params} />}\r\n      />\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport { TextInput, SelectInput, SwitchInput, DateInput, DateRangeInput, SearchTextField }\r\n","import React from \"react\";\r\nimport { Snackbar, Alert } from '@mui/material';\r\n\r\nexport default (props: any) => {\r\n    const { content, duration = 3000, type } = props;\r\n    // 开关控制：默认true,调用时会直接打开\r\n    const [open, setOpen] = React.useState(true);\r\n    // 关闭消息提示\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n    return <Snackbar\r\n        open={open}\r\n        autoHideDuration={duration}\r\n        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n        onClose={handleClose}>\r\n        <Alert onClose={handleClose} severity={type}>{content}</Alert>\r\n    </Snackbar>\r\n}\r\n","import ToastItem from \"./ToastItem\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nconst Toast = {\r\n  //dom: null,\r\n  success(content: any, duration?: any) {\r\n    // 创建一个dom\r\n    let dom = document.createElement('div');\r\n    // 定义组件，\r\n    const JSXdom = (<ToastItem content={content} duration={duration} type='success' />);\r\n    // 渲染DOM\r\n    ReactDOM.render(JSXdom, dom)\r\n    // 置入到body节点下\r\n    document.body.appendChild(dom);\r\n  },\r\n  error(content: any, duration?: any) {\r\n    let dom = document.createElement('div');\r\n    const JSXdom = (<ToastItem content={content} duration={duration} type='error' />);\r\n    ReactDOM.render(JSXdom, dom)\r\n    document.body.appendChild(dom);\r\n  },\r\n  warning(content: any, duration?: any) {\r\n    let dom = document.createElement('div');\r\n    const JSXdom = (<ToastItem content={content} duration={duration} type='warning' />);\r\n    ReactDOM.render(JSXdom, dom)\r\n    document.body.appendChild(dom);\r\n  },\r\n  info(content: any, duration?: any) {\r\n    let dom = document.createElement('div');\r\n    const JSXdom = (<ToastItem content={content} duration={duration} type='info' />);\r\n    ReactDOM.render(JSXdom, dom)\r\n    document.body.appendChild(dom);\r\n  }\r\n};\r\n\r\nexport default Toast;\r\n","import { Grid } from '@mui/material'\r\n\r\nimport { ControlInputProps } from 'src/types/ComponentProps'\r\nimport { SwitchInput } from '../InputControls'\r\n\r\nconst ItemSwitch = ({ items }: ControlInputProps) => {\r\n  return (\r\n    <Grid container direction='row'>\r\n      {items.map((item, index) => {\r\n        return (\r\n          <Grid item xs={6}>\r\n            <SwitchInput\r\n              id={item.id}\r\n              key={index}\r\n              name={item.name}\r\n              enabled={item.enabled}\r\n              checked={item.checked}\r\n              onChange={item.onChange}\r\n            />\r\n          </Grid>\r\n        )\r\n      })}\r\n    </Grid>\r\n  )\r\n}\r\nexport default ItemSwitch\r\n","import { Grid, Stack, TextField } from '@mui/material';\r\nimport Typography from '@mui/material/Typography';\r\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\r\nimport { DateTimePicker } from '@mui/x-date-pickers/DateTimePicker';\r\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\r\nimport {\r\n  ControlInputProps, PolicyEditorProps,\r\n  SelectInputProps,\r\n  TextInputProps, TimeInputProps\r\n} from 'src/types/ComponentProps';\r\nimport { SelectInput, SwitchInput, TextInput } from '../common/InputControls';\r\nimport ItemSwitch from '../common/ItemSwitch/ItemSwitch';\r\n\r\n\r\nconst PolicyEditor = ({ items }: PolicyEditorProps) => {\r\n  return <Stack spacing={3}>\r\n    {items?.map((item, index) => {\r\n      switch (item.type) {\r\n        case 'text': {\r\n          const value = item.value as TextInputProps\r\n          return (\r\n            <Grid item key={index} display={item.display ? 'block' : 'none'}>\r\n              <TextInput\r\n                id={value.id}\r\n                key={index}\r\n                name={value.name}\r\n                defaultValue={value.defaultValue}\r\n                placeHolder={value.placeHolder}\r\n                onChange={value.onChange}\r\n              />\r\n            </Grid>\r\n          )\r\n        }\r\n\r\n        case 'select': {\r\n          const value = item.value as SelectInputProps\r\n          return (\r\n            <Grid item key={index} display={item.display ? 'block' : 'none'}>\r\n              <SelectInput\r\n                id={value.id}\r\n                key={index}\r\n                name={value.name}\r\n                options={value.options}\r\n                defaultValue={value.defaultValue}\r\n                placeHolder={value.placeHolder}\r\n                onChange={value.onChange}\r\n              />\r\n            </Grid>\r\n          )\r\n        }\r\n        // 单选框\r\n        // case 'switch': {\r\n        //   const value = item.value as SwitchInputProps\r\n        //   return (\r\n        //     <Grid item key={index} display={item.display ? 'block' : 'none'}>\r\n        //       <SwitchInput\r\n        //         id={value.id}\r\n        //         key={index}\r\n        //         name={value.name}\r\n        //         enabled={value.enabled}\r\n        //         checked={value.checked}\r\n        //         onChange={value.onChange}\r\n        //       />\r\n        //     </Grid>\r\n        //   )\r\n        // }\r\n        case 'title': {\r\n          return (\r\n            <Stack key={index}>\r\n              <Typography\r\n                variant=\"h4\" color=\"textPrimary\"\r\n              >\r\n                {'添加规则'}\r\n              </Typography>\r\n            </Stack>\r\n          )\r\n        }\r\n        case 'control': {\r\n          const values = item.value as ControlInputProps\r\n\r\n          return <ItemSwitch items={values.items} />\r\n        }\r\n        case 'time': {\r\n          const value = item.value as TimeInputProps\r\n          return (\r\n            <Stack direction={'column'} key={index} display={item.display ? 'flex' : 'none'}>\r\n              {/* <Box>{value.title}</Box> */}\r\n              <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n                <DateTimePicker\r\n                  // id={value.id}\r\n                  label={value.title}\r\n                  value={value.value}\r\n                  onChange={value.onChange}\r\n                  renderInput={(params: any) => <TextField {...params} />}\r\n                />\r\n              </LocalizationProvider>\r\n            </Stack>\r\n          )\r\n        }\r\n        default:\r\n          return <></>\r\n      }\r\n    })}\r\n  </Stack>\r\n}\r\n\r\nexport default PolicyEditor\r\n","import { Button, Grid, Stack, Fade } from '@mui/material';\r\nimport { useStore } from 'reto'\r\n// import { createData } from 'src/service/Data';\r\nimport { CreateProps, FileItemData, PolicyEditorProps } from 'src/types/ComponentProps'\r\nimport Toast from '../../common/Toast'\r\n\r\nimport { addPolicy } from 'src/service/policyApi'\r\nimport { CreatePolicyPageStore } from 'src/states/page/policy-manage/CreatePolicyPageStore'\r\nimport PolicyEditor from '../../file-share/PolicyEditor'\r\nimport { useLocation, useNavigate } from 'react-router'\r\nimport { getUserList, shareFile } from 'src/service/medic';\r\nimport { useState, useEffect } from 'react';\r\nimport { RoleSelectData } from 'src/types/models/DataModels';\r\n\r\n\r\n\r\nconst PolicyManageCreateWrapper = ({ }: CreateProps) => {\r\n  const states = useStore(CreatePolicyPageStore)\r\n  const navi = useNavigate()\r\n  const location = useLocation();\r\n  const file = (location.state as FileItemData);\r\n  const [roles, setRoles] = useState<Array<RoleSelectData>>([])\r\n  useEffect(() => {\r\n    getUserList().then(res => {\r\n      if (res && res.code === 200) {\r\n        if (Array.isArray(res.data)) {\r\n          setRoles(res.data.map((item, idx) => { return { id: idx.toString(), name: item } }))\r\n        }\r\n      } else {\r\n        Toast.error('获取用户列表失败')\r\n      }\r\n    })\r\n    states.setTo(new Date())\r\n  }, [])\r\n  const onChange = (e: any) => {\r\n    // 绑定输入值（时间忽略）\r\n    switch (e.target.id) {\r\n      case 'policyName':\r\n        states.setPolicyName(e.target.value)\r\n        break\r\n      case 'des':\r\n        states.setDes(e.target.value)\r\n        break\r\n      case 'count':\r\n        states.setCount(parseInt(e.target.value))\r\n        break\r\n      case 'role':\r\n        states.setRole(e.target.value)\r\n        break\r\n      case 'allow':\r\n        states.setAllow(parseInt(e.target.value))\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n\r\n  const props: PolicyEditorProps = {\r\n    items: [\r\n      {\r\n        type: 'text',\r\n        display: true,\r\n        value: {\r\n          id: 'policyName',\r\n          name: '策略名称',\r\n          defaultValue:states.policyName,\r\n          placeHolder: '请输入共享策略名称',\r\n          onChange: onChange\r\n        }\r\n      },\r\n      {\r\n        type: 'text',\r\n        display: true,\r\n        value: {\r\n          id: 'des',\r\n          name: '策略描述',\r\n          defaultValue:states.des,\r\n          placeHolder: '请输入共享描述',\r\n          onChange: onChange\r\n        }\r\n      },\r\n      {\r\n        type:\"title\"\r\n      },\r\n      // 可控制显示\r\n      {\r\n        type: 'control',\r\n        value: {\r\n          items: [\r\n            {\r\n              name: '限制使用次数',\r\n              enabled: true,\r\n              checked: states.countDisplay,\r\n              onChange: (e: any) => {\r\n                states.setCountDisplay(e.target.checked)\r\n              }\r\n            },\r\n            {\r\n              name: '限制使用时间',\r\n              enabled: true,\r\n              checked: states.timeDisplay,\r\n              onChange: (e: any) => {\r\n                states.setTimeDisplay(e.target.checked)\r\n              }\r\n            },\r\n            {\r\n              name:'限制后续传播共享',\r\n              enabled:true,\r\n              checked: states.allowDisplay,\r\n              onChange: (e: any) => {\r\n                states.setAllowDisplay(e.target.checked)\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      },\r\n\r\n      {\r\n        type: 'select',\r\n        display:true,\r\n        value: {\r\n          id: 'role',\r\n          name: '共享至',\r\n          placeHolder: '请选择共享用户',\r\n          defaultValue:states.role,\r\n          options: roles,\r\n          onChange: (e: any) => {\r\n            states.setRole(e.target.value)\r\n          }\r\n        }\r\n      },\r\n      {\r\n        type: 'text',\r\n        display: states.countDisplay,\r\n        value: {\r\n          id: 'count',\r\n          name: '用户可访问次数',\r\n          defaultValue:states.count.toString(),\r\n          placeHolder: '请输入用户可访问次数',\r\n          onChange: onChange\r\n        }\r\n      },\r\n      {\r\n        type: 'time',\r\n        display: states.timeDisplay,\r\n        value: {\r\n          id: 'to',\r\n          value: states.to,\r\n          title: '共享结束时间',\r\n          defaultValue:states.to.toString(),\r\n          onChange: (newValue: any) => {\r\n            states.setTo(newValue)\r\n          }\r\n        }\r\n      },\r\n      {\r\n        type: 'text',\r\n        display: states.allowDisplay,\r\n        value: {\r\n          id: 'allow',\r\n          name: '用户是否可以共享',\r\n          defaultValue:states.isAllow.toString(),\r\n          placeHolder: '如果赋予权限请填1，否则为0',\r\n          onChange: onChange\r\n        }\r\n      }\r\n     \r\n      // 默认使用到时删除\r\n      // {\r\n      //   type: 'switch',\r\n      //   display: states.timeDisplay,\r\n      //   value: {\r\n      //     id: 'delete',\r\n      //     checked: states.checked,\r\n      //     name: '到时间是否删除',\r\n      //     enabled: true,\r\n      //     onChange: (e: any) => {\r\n      //       states.setCheacked(e.target.checked)\r\n      //     }\r\n      //   }\r\n      // }\r\n    ]\r\n  }\r\n\r\n\r\n  //创建数据通道请求\r\n  const onSubmit = () => {\r\n    if(states.policyName.length == 0){\r\n      Toast.warning(\"策略名不能为空\")\r\n      return\r\n    }\r\n    if (states.des.length == 0) {\r\n      Toast.warning('描述不能为空！')\r\n      return\r\n    }\r\n    if(states.role.length == 0){\r\n      Toast.warning(\"共享目标用户不能为空\")\r\n    }\r\n    if(states.to.getTime() > file.expire ){\r\n      Toast.warning('共享结束时间不能超过病历过期时间！')\r\n      return\r\n    }\r\n    if(states.count > (file.useLimit - file.use)){\r\n      Toast.warning('病历可访问次数共享次数不能超过剩余次数！')\r\n      return\r\n    }\r\n    console.log(file)\r\n    shareFile({\r\n      fileName: file.fileName,\r\n      target: roles[states.role].name,\r\n      expire: states.to.getTime(),\r\n      useLimit: states.count,\r\n      name: states.policyName,\r\n      desc: states.des,\r\n      isAllow:states.isAllow,\r\n      state:file.state,\r\n    })\r\n      .then(res => {\r\n        if (res.code == 200) {\r\n          Toast.success('病历共享成功')\r\n          navi('/filemanage')\r\n        } else {\r\n          console.log(res)\r\n          Toast.error('请求失败 ' + res.msg)\r\n        }\r\n      })\r\n      .catch(error => {\r\n        Toast.error('错误' + error)\r\n      })\r\n  }\r\n\r\n  return (\r\n    <Fade in={true}>\r\n      <Stack mt={2} mb={2} spacing={4}>\r\n        <PolicyEditor items={props.items} />\r\n        <Button fullWidth variant='contained' sx={{ minHeight: 50 }} onClick={onSubmit} >\r\n          确认添加\r\n        </Button>\r\n      </Stack>\r\n    </Fade>\r\n  )\r\n}\r\n\r\nexport default PolicyManageCreateWrapper\r\n","import PolicyManageCreateWrapper from '../../components/policy-manage/Edit';\r\n\r\nconst PolicyManageCreatePage = () => {\r\n    return (\r\n        <PolicyManageCreateWrapper />\r\n    )\r\n}\r\n\r\nexport default PolicyManageCreatePage\r\n","import axios from \"axios\";\r\nimport { ServiceResponse } from \"./common\";\r\nimport { FileItemData } from \"src/types/ComponentProps\";\r\nimport { number } from 'prop-types';\r\n\r\n/**\r\n * \r\n * @export\r\n * @interface ShareParam\r\n */\r\nexport interface ShareParam {\r\n    fileName: string;\r\n    // 共享策略名称\r\n    name:string;\r\n    // 共享策略描述\r\n    desc:string;\r\n    target: string;\r\n    expire: number;\r\n    useLimit: number;\r\n    isAllow:number;\r\n    state:string;\r\n}\r\n\r\n\r\n\r\n/**\r\n * \r\n * @export\r\n * @interface SharedFile\r\n */\r\nexport interface SharedFile {\r\n    id : number;\r\n    /**\r\n     * \r\n     * @type {string}\r\n     * @memberof SharedFile\r\n     */\r\n    fileName: string;\r\n    /**\r\n     * \r\n     * @type {number}\r\n     * @memberof SharedFile\r\n     */\r\n    fileSize: number;\r\n    /**\r\n     * \r\n     * @type {string}\r\n     * @memberof SharedFile\r\n     */\r\n    target: string;\r\n    /**\r\n     * \r\n     * @type {number}\r\n     * @memberof SharedFile\r\n     */\r\n    expire: number;\r\n    /**\r\n     * \r\n     * @type {number}\r\n     * @memberof SharedFile\r\n     */\r\n    useLimit: number;\r\n    /**\r\n     * \r\n     * @type {number}\r\n     * @memberof SharedFile\r\n     */\r\n    use: number;\r\n        /*\r\n    * 确认是否可以被共享\r\n    */\r\n    isAllow:number;\r\n    state:string;\r\n}\r\nexport interface BeSharedFile {\r\n    id :number;\r\n    fileName: string;\r\n    fileSize: number;\r\n    from: string;\r\n    expire: number;\r\n    useLimit: number;\r\n    use: number;\r\n    isAllow:number;\r\n    state:string;\r\n}\r\nexport interface LoginResult {\r\n    token: string\r\n    isAdmin : number\r\n}\r\nexport interface Login {\r\n    username: string\r\n    password: string\r\n}\r\n\r\nexport interface Regitser{\r\n    username: string,\r\n    password: string,\r\n    retry_password: string\r\n}\r\n\r\nexport interface CommonFile {\r\n    fileName: string,\r\n    owner: string,\r\n    expire: number,\r\n    use: number,\r\n    useLimit: number,\r\n    fileSize: number,\r\n        /*\r\n    * 确认是否可以被共享\r\n    */\r\n    isAllow:number;\r\n}\r\n\r\nexport function FileToFileItemData(idx: number, item: CommonFile): FileItemData {\r\n    const owner = localStorage.getItem('username')\r\n    return {\r\n        id: idx,\r\n        fileName: item.fileName,\r\n        size: item.fileSize,\r\n        state: owner == item.owner ? 'owned' : 'fromShared',\r\n        owner: item.owner,\r\n        isAllow: item.isAllow,\r\n        use: item.use,\r\n        useLimit: item.useLimit,\r\n        expire: item.expire\r\n    }\r\n}\r\nexport function SharedFileToFileItemData(idx: number, item: SharedFile): FileItemData {\r\n    const owner = localStorage.getItem('username')\r\n    return {\r\n        id: idx,\r\n        fileName: item.fileName,\r\n        size: item.fileSize,\r\n        state: owner == item.target ? 'owned' : 'fromShared',\r\n        owner: item.target,\r\n        isAllow: item.isAllow,\r\n        use: item.use,\r\n        useLimit: item.useLimit,\r\n        expire: item.expire\r\n    }\r\n}\r\n/**\r\n *\r\n * @export\r\n * @interface LoginResultResponse\r\n */\r\nexport const login = async (userName: string, passWord: string): Promise<ServiceResponse<LoginResult>> => {\r\n    const res = await axios.post('/user/login', {\"username\" : userName, \"password\":passWord })\r\n    return res.data\r\n}\r\n\r\nexport const register = async (userName: string, passWord: string, repeatPass: string) =>{\r\n    const res = await axios.post('/user/register', {\"username\" : userName, \"password\":passWord ,\"retry_password\":repeatPass})\r\n    return res.data\r\n}\r\n/**\r\n *\r\n * @export\r\n * @interface LoginResultResponse\r\n */\r\nexport const getFileList = async (): Promise<ServiceResponse<Array<CommonFile>>> => {\r\n    const res = await axios.get('/file/list', { headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` } })\r\n    return res.data\r\n}\r\nexport const getUserList = async (): Promise<ServiceResponse<Array<string>>> => {\r\n    const res = await axios.get('/user/list', { headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` } })\r\n    return res.data\r\n}\r\n\r\n/**\r\n *\r\n * @export\r\n * @interface LoginResultResponse\r\n */\r\n// \r\nexport const shareFile = async (param: ShareParam): Promise<ServiceResponse<undefined>> => {\r\n    console.log(\"请求参数\",param)\r\n    const res = await axios.post('/user/share', param, { headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` } })\r\n    return res.data\r\n}\r\n// 获取分享出去的文件列表\r\nexport const myShareFile = async (): Promise<ServiceResponse<Array<SharedFile>>> => {\r\n    const res = await axios.get('/file/share', { headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` } })\r\n    return res.data\r\n}\r\n// 获取当前用户被共享病历\r\nexport const myBeShareFile = async (): Promise<ServiceResponse<Array<BeSharedFile>>> => {\r\n    const res = await axios.get('/file/be-share', { headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` } })\r\n    return res.data\r\n}\r\n\r\n// 根据文件名称下载文件\r\nexport const downloadFile = async (fileName: string,state:string): Promise<any> => {\r\n    const res = await axios.get(`/file/download?filename=${fileName}&state=${state}`, { responseType: 'blob', headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` } })\r\n    return res.data\r\n}\r\nexport const uploadFile = async(param:FormData): Promise<any>=>{\r\n    const res = await axios.post(`/admin/upload`,param,{headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }})\r\n    return res.data\r\n}\r\nexport const deleteSharingFile = async (id:number) => {\r\n    const res = await axios.get(`/file/shareDelete?id=${id}`,{headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }})\r\n    return res.data\r\n}\r\n"],"names":["TextInput","id","name","defaultValue","placeHolder","onChange","fullWidth","label","placeholder","SelectInput","options","Select","labelId","map","option","index","MenuItem","value","SwitchInput","styled","Switch","theme","padding","borderRadius","content","position","top","transform","width","height","backgroundImage","encodeURIComponent","palette","getContrastText","primary","main","left","right","boxShadow","margin","checked","FormControlLabel","control","Checkbox","defaultChecked","labelPlacement","props","duration","type","React","open","setOpen","handleClose","Snackbar","autoHideDuration","anchorOrigin","vertical","horizontal","onClose","Alert","severity","success","dom","document","createElement","JSXdom","ToastItem","ReactDOM","body","appendChild","error","warning","info","items","Grid","container","direction","item","xs","enabled","Stack","spacing","display","Typography","variant","color","values","LocalizationProvider","dateAdapter","AdapterDateFns","DateTimePicker","title","renderInput","params","TextField","states","useStore","CreatePolicyPageStore","navi","useNavigate","file","useLocation","state","useState","roles","setRoles","useEffect","getUserList","then","res","code","Array","isArray","data","idx","toString","Toast","setTo","Date","e","target","setPolicyName","setDes","setCount","parseInt","setRole","setAllow","policyName","des","countDisplay","setCountDisplay","timeDisplay","setTimeDisplay","allowDisplay","setAllowDisplay","role","count","to","newValue","isAllow","Fade","in","mt","mb","Button","sx","minHeight","onClick","length","getTime","expire","useLimit","use","console","log","shareFile","fileName","desc","msg","catch","SharedFileToFileItemData","owner","localStorage","getItem","size","fileSize","login","userName","passWord","axios","register","repeatPass","getFileList","headers","param","myShareFile","myBeShareFile","downloadFile","responseType","uploadFile","deleteSharingFile"],"sourceRoot":""}