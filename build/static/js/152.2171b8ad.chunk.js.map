{"version":3,"file":"static/js/152.2171b8ad.chunk.js","mappings":"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","sources":["states/page/file-share/sharedtome/index.ts","components/file-share/shared-to-me/ShredToMeFileOperationMenu/index.tsx","components/file-share/shared-to-me/SharedToMe.tsx","pages/file-share/SharedToMe.tsx"],"sourcesContent":["import { Dispatch, SetStateAction, useState } from 'react'\r\nimport { useStore } from 'reto'\r\nimport { ConfirmDeleteDialogStore } from 'src/states/common/ConfirmDeleteDialogStore'\r\nimport { LoadingStore } from 'src/states/common/LoadingStore'\r\nimport { FileItemData } from 'src/types/ComponentProps'\r\n\r\ntype SnackBarType = 'success' | 'error' | 'warning' | 'info'\r\n\r\n// 新建数据通道\r\nexport interface SharedToMeStates {\r\n  files: FileItemData[]\r\n}\r\n\r\nexport interface SharedToMeStore\r\n  extends SharedToMeStates,\r\n  LoadingStore {\r\n  setFiles: Dispatch<SetStateAction<any[]>>\r\n}\r\n\r\nexport function SharedToMeStore(): SharedToMeStore {\r\n  const loadingStore = useStore(LoadingStore)\r\n  const confirmDeleteDialogStore = useStore(ConfirmDeleteDialogStore)\r\n  const [files, setFiles] = useState<any[]>([])\r\n  return {\r\n    ...loadingStore,\r\n    ...confirmDeleteDialogStore,\r\n    files,\r\n    setFiles\r\n  }\r\n}\r\n","import { Delete, ErrorOutline, Share } from '@material-ui/icons';\r\nimport { Box, Stack } from '@mui/material';\r\nimport { FolderArrowUp } from 'mdi-material-ui';\r\nimport OperationItem from 'src/components/common/OperationItem';\r\nimport Section from 'src/components/common/Section';\r\nimport SimpleFileItem from 'src/components/common/SimpleFileItem';\r\nimport VerticalList from 'src/components/common/VerticalList';\r\nimport { FileOperationMenuProps } from '../../../../types/ComponentProps';\r\n\r\n\r\n\r\nconst ShredToMeFileOperationMenu = ({ fileName, onOperationClicked }: FileOperationMenuProps) => {\r\n    return (\r\n        <Stack m={1}>\r\n            <Box borderRadius={3}>\r\n                <SimpleFileItem fileName={fileName} />\r\n                <Section title='文件操作'>\r\n                    <VerticalList items={[\r\n                        <OperationItem icon={<FolderArrowUp fontSize='large' />} name={'打开'} onclick={() => onOperationClicked('open')} />,\r\n                        <OperationItem icon={<Share fontSize='large' />} name={'共享'} onclick={() => onOperationClicked('share')} />,\r\n                        <OperationItem icon={<Delete fontSize='large' />} name={'删除'} onclick={() => onOperationClicked('delete')} />\r\n                    ]} />\r\n                </Section>\r\n                <Section title='更多操作'>\r\n                    <VerticalList items={[\r\n                        <OperationItem icon={<ErrorOutline fontSize='large' />} name={'详细信息'} onclick={() => onOperationClicked('detail')} />\r\n                    ]} />\r\n                </Section>\r\n            </Box>\r\n\r\n        </Stack>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default ShredToMeFileOperationMenu\r\n","import { Box, Fade } from \"@mui/material\"\r\nimport { useEffect } from \"react\"\r\nimport { useNavigate } from \"react-router\"\r\nimport { useStore } from 'reto'\r\nimport FileState from \"src/components/common/FileState\"\r\nimport { getPolicies } from \"src/service/policyApi\"\r\nimport { SharedToMeStore } from \"src/states/page/file-share/sharedtome\"\r\nimport { BottomDrawerStore } from '../../../states/global/BottomDrawerStore'\r\nimport FileItem from \"../../common/FileItem\"\r\nimport VerticalList from \"../../common/VerticalList\"\r\nimport SharedToMeFileOperationMenu from \"./ShredToMeFileOperationMenu\"\r\nimport { FileToFileItemData, getFileList } from \"src/service/medic\"\r\nimport { toLocalTimeString } from \"src/utils/time\"\r\nimport { sizeToString } from \"src/utils/sizeToString\"\r\n\r\nconst SharedToMeWrapper = () => {\r\n  const navi = useNavigate()\r\n  const states = useStore(SharedToMeStore)\r\n  const drawerStates = useStore(BottomDrawerStore)\r\n  useEffect(() => {\r\n    getFileList().then(res => {\r\n      if (res && res.code === 0) {\r\n        if (Array.isArray(res.data)) {\r\n          states.setFiles(res.data\r\n            .map((item, idx) => {\r\n              return FileToFileItemData(idx, item)\r\n            }))\r\n          states.setLoading(false)\r\n        } else {\r\n          states.setFiles([res.data])\r\n        }\r\n      }\r\n    })\r\n  }, [])\r\n\r\n  const handleFileOperation = (ty: any, index: number) => {\r\n    switch (ty) {\r\n      case 'delete':\r\n        console.log('delete files at index', index);\r\n        break;\r\n      case 'open':\r\n        drawerStates.setBottomDrawerOpen(false)\r\n        console.log(states.files)\r\n        navi('/pdfpreview', { state: states.files[index] })//传入Id值\r\n        break;\r\n        break;\r\n      case 'share':\r\n        console.log('share files at index', index);\r\n        break;\r\n      case 'detail':\r\n        console.log('detail files at index', index);\r\n        break;\r\n    }\r\n  }\r\n  const onOperationClicked = (index: number) => {\r\n    drawerStates.setBottomDrawerOpen(true)\r\n    drawerStates.setBottomDrawerContent(\r\n      <SharedToMeFileOperationMenu fileName={states.files[index].name} onOperationClicked={(ty) => handleFileOperation(ty, index)} />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Fade in={true}>\r\n      <Box>\r\n        <VerticalList items={states.files?.map((SharedItems, index) => {\r\n          console.log(SharedItems)\r\n          return <FileItem\r\n            key={index}\r\n            fileName={SharedItems.name}\r\n            fileTime={toLocalTimeString(SharedItems.expire)}\r\n            fileSize={sizeToString(SharedItems.size)}\r\n            remainUse={SharedItems.useLimit - SharedItems.use}\r\n            sharedContent={<FileState state={'shared'} />}\r\n            onOperationClicked={() => onOperationClicked(index)} />\r\n        })} onItemClicked={onOperationClicked} />\r\n      </Box>\r\n    </Fade>\r\n  )\r\n}\r\nexport default SharedToMeWrapper\r\n","import { Provider } from 'reto';\r\nimport SharedToMeWrapper from '../../components/file-share/shared-to-me/SharedToMe';\r\nimport { SharedToMeStore } from '../../states/page/file-share/sharedtome/index';\r\nconst SharedToMePage = () => {\r\n    return (\r\n        <Provider of={SharedToMeStore}>\r\n            <SharedToMeWrapper />\r\n        </Provider>\r\n    )\r\n}\r\n\r\nexport default SharedToMePage\r\n"],"names":["SharedToMeStore","loadingStore","useStore","LoadingStore","confirmDeleteDialogStore","ConfirmDeleteDialogStore","useState","files","setFiles","fileName","onOperationClicked","Stack","m","Box","borderRadius","SimpleFileItem","Section","title","VerticalList","items","OperationItem","icon","FolderArrowUp","fontSize","name","onclick","Share","Delete","ErrorOutline","navi","useNavigate","states","drawerStates","BottomDrawerStore","useEffect","getFileList","then","res","code","Array","isArray","data","map","item","idx","FileToFileItemData","setLoading","index","setBottomDrawerOpen","setBottomDrawerContent","ty","console","log","state","handleFileOperation","Fade","in","SharedItems","FileItem","fileTime","toLocalTimeString","expire","fileSize","sizeToString","size","remainUse","useLimit","use","sharedContent","FileState","onItemClicked","of","SharedToMe"],"sourceRoot":""}