"use strict";(self.webpackChunkwebfile=self.webpackChunkwebfile||[]).push([[405],{9405:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var i=t(9439),r=t(8953),s=t(627),o=t(3767),a=t(2791),l=t(4005),c=t(2001),u=t(2479),f=t(2639),m=t(3456),x=t(9505),d=t(184),p=function(e){var n=e.items,t=e.onOperationClicked;return(0,d.jsx)(x.Z,{items:n.map((function(e,n){return(0,d.jsx)(f.Z,{fileName:e.fileName,fileSize:(0,c.N)(e.size),fileTime:(0,u.u)(e.expire),remainUse:e.useLimit-e.use,sharedContent:(0,d.jsx)(m.Z,{state:e.state}),onOperationClicked:function(){return t(n)}},n)}))})},Z=t(7442),w=t(3857),j=t(3195),h=t(4554),k=t(9377),g=t(1186),N=t(4350),b=function(e){var n=e.fileName,t=e.onOperationClicked;return(0,d.jsx)(o.Z,{m:1,children:(0,d.jsxs)(h.Z,{borderRadius:5,children:[(0,d.jsx)(N.Z,{fileName:n}),(0,d.jsx)(Z.Z,{title:"\u6587\u4ef6\u64cd\u4f5c",children:(0,d.jsx)(x.Z,{items:[(0,d.jsx)(g.Z,{icon:(0,d.jsx)(k.Z,{fontSize:"large"}),name:"\u6253\u5f00",onclick:function(){return t("open")}}),(0,d.jsx)(g.Z,{icon:(0,d.jsx)(w.Z,{fontSize:"large"}),name:"\u5171\u4eab",onclick:function(){return t("share")}})]})}),(0,d.jsx)(Z.Z,{title:"\u66f4\u591a\u64cd\u4f5c",children:(0,d.jsx)(x.Z,{items:[(0,d.jsx)(g.Z,{icon:(0,d.jsx)(j.Z,{fontSize:"large"}),name:"\u8be6\u7ec6\u4fe1\u606f",onclick:function(){return t("detail")}})]})})]})})},v=t(5320),C=t(6871),O=t(1315),S=t(7090),D=function(){var e=(0,l.oR)(r.i),n=(0,C.s0)(),t=(0,a.useState)([]),c=(0,i.Z)(t,2),u=c[0],f=c[1];(0,a.useEffect)((function(){(0,O.fD)().then((function(e){f(e.data.map((function(e,n){var t=localStorage.getItem("userName");return{id:n,fileName:e.fileName,size:e.fileSize,state:t==e.owner?"owned":"fromShared",owner:e.owner,use:e.use,useLimit:e.useLimit,expire:e.expire,isAllow:e.isAllow}})))}))}),[]);var m=(0,v.x)();return(0,d.jsx)(s.Z,{in:!0,children:(0,d.jsx)(o.Z,{className:m.root,children:(0,d.jsx)(Z.Z,{title:"\u6240\u6709\u6587\u4ef6",children:(0,d.jsx)(p,{items:u,onOperationClicked:function(t){var i=u[t].useLimit-u[t].use;console.log("\u6587\u4ef6\u8fc7\u671f\u65f6\u95f4",u[t].expire),console.log("\u5f53\u524d\u65f6\u95f4",(new Date).getTime()),u[t].expire<(new Date).getTime()?S.Z.warning("\u8be5\u6587\u4ef6\u5df2\u8fc7\u671f\uff0c\u8bf7\u8054\u7cfb\u75c5\u5386\u62e5\u6709\u8005"):i<=0?S.Z.warning("\u8be5\u6587\u4ef6\u5df2\u88ab\u4f7f\u7528\u6b21\u6570\u7528\u5b8c\uff0c\u8bf7\u8054\u7cfb\u75c5\u5386\u62e5\u6709\u8005"):(e.setBottomDrawerOpen(!0),e.setBottomDrawerContent((0,d.jsx)(b,{fileName:u[t].fileName,onOperationClicked:function(i){return function(t,i){switch(t){case"delete":console.log("delete files at index",i);break;case"open":e.setBottomDrawerOpen(!1),n("/pdfpreview",{state:u[i]});break;case"share":if(e.setBottomDrawerOpen(!1),1!=u[i].isAllow){S.Z.warning("\u5f53\u524d\u75c5\u5386\u5e76\u672a\u5206\u914d\u5171\u4eab\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u5171\u4eab\u6765\u6e90\u7528\u6237");break}n("/policymanage/create",{state:u[i]});break;case"detail":e.setBottomDrawerOpen(!1),n("/fileshare/details",{state:u[i]})}}(i,t)}})))}})})})})},z=function(){return(0,d.jsx)(D,{})}},5320:function(e,n,t){t.d(n,{x:function(){return i}});var i=(0,t(8596).Z)({root:{"& > *":{userSelect:"none"}}})}}]);
//# sourceMappingURL=405.4b429633.chunk.js.map